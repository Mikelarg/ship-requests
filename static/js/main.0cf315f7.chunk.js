(this["webpackJsonpship-requests"]=this["webpackJsonpship-requests"]||[]).push([[0],{155:function(e){e.exports=JSON.parse('{"data":[{"id":1,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d","address_from_id":1,"address_to_id":2},{"id":2,"name":"\u041d\u0435 \u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d","address_from_id":1,"address_to_id":3},{"id":3,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 2","address_from_id":1,"address_to_id":9},{"id":4,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d","address_from_id":4,"address_to_id":6},{"id":5,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":2,"address_to_id":7},{"id":6,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":2,"address_to_id":8},{"id":7,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 29","address_from_id":1,"address_to_id":9},{"id":8,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 31","address_from_id":4,"address_to_id":5},{"id":9,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":5,"address_to_id":1},{"id":10,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":4,"address_to_id":2},{"id":11,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 7","address_from_id":3,"address_to_id":2},{"id":12,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 9","address_from_id":9,"address_to_id":2},{"id":13,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":3,"address_to_id":7},{"id":14,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 7","address_from_id":7,"address_to_id":9},{"id":15,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 8","address_from_id":8,"address_to_id":9}]}')},156:function(e){e.exports=JSON.parse('{"data":[{"id":1,"name":"\u0421\u043a\u043b\u0430\u0434 1","lat":55.72191595164918,"lon":37.669966412655874},{"id":2,"name":"\u0421\u043a\u043b\u0430\u0434 2","lat":55.72618037058204,"lon":37.66975183379298},{"id":3,"name":"\u0421\u043a\u043b\u0430\u0434 3","lat":55.725141110910755,"lon":37.654817279119634},{"id":4,"name":"\u0421\u043a\u043b\u0430\u0434 4","lat":55.67220852280308,"lon":37.61119346389933},{"id":5,"name":"\u0421\u043a\u043b\u0430\u0434 5","lat":55.67694859836669,"lon":37.65302378273226},{"id":6,"name":"\u0421\u043a\u043b\u0430\u0434 6","lat":55.63947294954722,"lon":37.67062643080427},{"id":7,"name":"\u0421\u043a\u043b\u0430\u0434 7","lat":55.75629016352462,"lon":37.71537109652677},{"id":8,"name":"\u0421\u043a\u043b\u0430\u0434 8","lat":55.755495684159065,"lon":37.68037390969046},{"id":9,"name":"\u0421\u043a\u043b\u0430\u0434 9","lat":55.75498998992899,"lon":37.66711054205515},{"id":10,"name":"\u0421\u043a\u043b\u0430\u0434 10","lat":55.80276864631171,"lon":37.63826424200409}]}')},163:function(e,t,r){},164:function(e,t,r){},166:function(e,t,r){},254:function(e,t,r){},257:function(e,t,r){},258:function(e,t,r){"use strict";r.r(t);var s=r(0),a=r.n(s),n=(r(163),r(1)),d=r(264),i=r(145),o=r(270),c=r(4),u=r(9),l=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},f=(r(164),r(24)),m=["id","dir","isDragging"],b=function(e){var t=e.id,r=void 0===t?"drag-bar":t,a=e.dir,d=e.isDragging,i=Object(u.a)(e,m),o=Object(s.useState)(!1),b=Object(c.a)(o,2),j=b[0],_=b[1];return Object(f.jsx)("div",Object(n.a)({id:r,"data-testid":r,tabIndex:0,className:l("sample-drag-bar","horizontal"===a&&"sample-drag-bar--horizontal",(d||j)&&"sample-drag-bar--dragging"),onFocus:function(){return _(!0)},onBlur:function(){return _(!1)}},i))},j=r(30),_=r(65),O=r(266),p=r(267),h=r(269),g=r(265),x=(r(166),r(68)),v=r(45),q=r(2),w="GET_ALL_REQUESTS",y="UPDATE_REQUEST",R="RECEIVE_REQUESTS",S="GET_ALL_REQUESTS",E="RECEIVE_ADDRESSES",k="SET_CURRENT_REQUEST";function T(e){return{type:R,requests:e}}function I(e){return{type:E,addresses:e}}var C={requests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(n.a)({},t.requests.reduce((function(e,t){return e[t.id]=t,e}),{}));case y:return Object(n.a)(Object(n.a)({},e),{},Object(q.a)({},t.requestId,Object(n.a)(Object(n.a)({},e[t.requestId]),{},{address_from_id:t.addressFrom.id,address_from:t.addressFrom,address_to_id:t.addressTo.id,address_to:t.addressTo})));default:return e}},currentRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(n.a)({},t.request);case y:return e.id===t.requestId?Object(n.a)(Object(n.a)({},e),{},{address_from_id:t.addressFrom.id,address_from:t.addressFrom,address_to_id:t.addressTo.id,address_to:t.addressTo}):e;default:return e}}};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===E?Object(n.a)(Object(n.a)({},e),t.addresses.reduce((function(e,t){return e[t.id]=t,e}),{})):e};Object(v.b)({requests:C,addresses:F});function N(e){for(var t=Object(n.a)({},e.requests),r=0,s=Object.values(t);r<s.length;r++){var a=s[r];a.address_from=e.addresses[a.address_from_id],a.address_to=e.addresses[a.address_to_id]}return t}var U=r(52),L=r.n(U),D=L.a.objectOf(L.a.shape({id:L.a.number.isRequired,name:L.a.string.isRequired,lat:L.a.number.isRequired,lon:L.a.number.isRequired})),A=L.a.objectOf(L.a.shape({id:L.a.number.isRequired,name:L.a.string.isRequired,address_from_id:L.a.number.isRequired,address_from:D.isRequired,address_to_id:L.a.number.isRequired,address_to:D.isRequired})),P=r(93),V=["form","editing","dataIndex","title","record","index","children","addresses","addressTo","addressFrom","table","forceUpdate","onChange"],Q=Object(x.b)((function(e){return{addresses:e.addresses}}))((function(e){var t,r,s=e.form,a=e.editing,d=e.dataIndex,i=(e.title,e.record),o=(e.index,e.children),c=e.addresses,l=e.addressTo,m=void 0===l?"":l,b=e.addressFrom,j=void 0===b?"":b,_=(e.table,e.forceUpdate,e.onChange),p=Object(u.a)(e,V);if(i)if("address_from"===d){var h=[j.toString(),m?m.toString():i.address_to_id.toString()];r=h[0],t=h[1]}else{var g=[m.toString(),j?j.toString():i.address_from_id.toString()];r=g[0],t=g[1]}var x=Object.keys(c).filter((function(e){return e!==t})).map((function(e,t){return{label:c[e].name,value:e}}));return Object(f.jsx)("td",Object(n.a)(Object(n.a)({},p),{},{children:a?Object(f.jsx)(O.a.Item,{name:d,style:{margin:0},shouldUpdate:function(e,t){return e.address_from!==t.address_from||e.address_to!==t.address_to},children:Object(f.jsx)(P.a,{defaultValue:r,options:x,onChange:function(e){s.setFieldsValue(Object(q.a)({},d,parseInt(e))),_(d,e)}})}):o}))})),z=Object(x.b)((function(e){return{requests:N(e),currentRequest:e.currentRequest,addresses:e.addresses}}),{setCurrentRequest:function(e){return{type:k,request:e}},updateRequest:function(e,t,r){return{type:y,requestId:e,addressFrom:t,addressTo:r}}})((function(e){var t=O.a.useForm(),r=Object(c.a)(t,1)[0],a=Object.values(e.requests),d=e.addresses,i={selectedRowKeys:[e.currentRequest.id],onChange:function(t){e.setCurrentRequest(e.requests[t])},type:"radio"},o=Object(s.useState)(""),u=Object(c.a)(o,2),l=u[0],m=u[1],b=Object(s.useState)(""),x=Object(c.a)(b,2),v=x[0],q=x[1],w=Object(s.useState)(""),y=Object(c.a)(w,2),R=y[0],S=y[1],E=function(e){return e.id===l},k=function(){m(""),q(""),S("")},T=function(){var t=Object(_.a)(Object(j.a)().mark((function t(r){return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e.updateRequest(l,d[parseInt(v)],d[parseInt(R)]),m(""),q(""),S("")}catch(r){console.log("Validate Failed:",r)}case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=[{title:"ID",dataIndex:"id",key:"id",editable:!1},{title:"\u0418\u043c\u044f",dataIndex:"name",key:"name",editable:!1},{title:"\u041e\u0442\u043a\u0443\u0434\u0430",dataIndex:"address_from",key:"address_from",render:function(e){return e.name},editable:!0,className:"address_cell"},{title:"\u041a\u0443\u0434\u0430",dataIndex:"address_to",key:"address_to",render:function(e){return e.name},editable:!0,className:"address_cell"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return E(t)?Object(f.jsxs)("span",{children:[Object(f.jsx)(p.a.Link,{onClick:function(){return T(t.key)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(f.jsx)("br",{}),Object(f.jsx)(h.a,{title:"\u0423\u0432\u0435\u0440\u0435\u043d\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",onConfirm:k,children:Object(f.jsx)("a",{children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}):Object(f.jsx)(p.a.Link,{disabled:""!==l,onClick:function(){return function(e){r.setFieldsValue(Object(n.a)({address_from:e.address_from_id,address_to:e.address_to_id},e)),m(e.id),q(e.address_from_id),S(e.address_to_id)}(t)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})}}].map((function(e){return e.editable?Object(n.a)(Object(n.a)({},e),{},{onCell:function(t){return{record:t,dataIndex:e.dataIndex,title:e.title,editing:E(t)}}}):e})),C=function(e,t){"address_from"===e?q(t):S(t)};return Object(f.jsx)(g.a,{columns:I,dataSource:a,pagination:!1,className:"requests-table",rowSelection:i,rowKey:"id",rowClassName:"editable-row",components:{body:{cell:function(e){return Object(f.jsx)(Q,Object(n.a)({form:r,addressFrom:v,addressTo:R,onChange:C},e))}}}})})),B=r(263),J=r(268),M=r(51),W=r.n(M),G=(r(251),r(262)),H=r(115),K=function(e){var t=e.currentRequest,r=Object(G.a)();return Object(s.useEffect)((function(){if(r){var e,s=[];e=t,0!==Object.keys(e).length&&(s=[W.a.latLng(t.address_from.lat,t.address_from.lon),W.a.latLng(t.address_to.lat,t.address_to.lon)]);var a=W.a.Routing.control({waypoints:s,createMarker:function(e,t,r){var s="";s=0===e?"\u041e\u0442\u043a\u0443\u0434\u0430":"\u041a\u0443\u0434\u0430";var a=W.a.divIcon({className:"my-div-icon",html:'<img class="my-div-image" src="'.concat(H.a,'"/>')+'<span class="marker-span">'.concat(s,"</span>")});return W.a.marker(t.latLng,{icon:a})},lineOptions:{styles:[{color:"#6FA1EC",weight:4}]},show:!1,addWaypoints:!1,routeWhileDragging:!0,draggableWaypoints:!1,fitSelectedRoutes:!0,showAlternatives:!1}).addTo(r);return function(){return r.removeControl(a)}}}),[r,t]),null};K.propTypes={currentRequest:A};var Z=Object(x.b)((function(e){return{currentRequest:e.currentRequest}}))(K),X=r(153),Y=(r(253),r(254),W.a.icon({iconUrl:H.a,shadowUrl:X.a}));W.a.Marker.prototype.options.icon=Y;var $=[55.72578142274601,37.6768037893193];function ee(){return Object(f.jsxs)(B.a,{center:$,zoom:13,scrollWheelZoom:!1,className:"flex grow",children:[Object(f.jsx)(J.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",className:"map-tiles"}),Object(f.jsx)(Z,{})]})}r(255),r(256),r(257);var te=d.a.Header;var re=function(){var e=Object(i.a)({axis:"x",initial:540,min:300}),t=e.isDragging,r=e.position,s=e.splitterProps;return Object(f.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(f.jsx)(te,{className:"header",children:Object(f.jsxs)("h1",{children:[Object(f.jsx)(o.a,{className:"icon"}),"\u0417\u0430\u044f\u0432\u043a\u0438"]})}),Object(f.jsx)(d.a,{children:Object(f.jsxs)("div",{className:"site-layout flex grow",children:[Object(f.jsx)("div",{className:"shrink-0 requests",style:{width:r},children:Object(f.jsx)(z,{})}),Object(f.jsx)(b,Object(n.a)({isDragging:t},s)),Object(f.jsx)("div",{className:"flex grow",children:Object(f.jsx)(ee,{})})]})})]})},se=r(40),ae=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,271)).then((function(t){var r=t.getCLS,s=t.getFID,a=t.getFCP,n=t.getLCP,d=t.getTTFB;r(e),s(e),a(e),n(e),d(e)}))},ne=r(157),de=r(159),ie=r(154),oe=r.n(ie),ce=r(60),ue=r(155),le=r(156),fe=function(){return new Promise((function(e){setTimeout((function(){return e(ue.data)}),200)}))},me=function(){return new Promise((function(e){setTimeout((function(){return e(le.data)}),200)}))},be=Object(j.a)().mark(he),je=Object(j.a)().mark(ge),_e=Object(j.a)().mark(xe),Oe=Object(j.a)().mark(ve),pe=Object(j.a)().mark(qe);function he(){var e;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ce.b)(fe);case 2:return e=t.sent,t.next=5,Object(ce.d)(T(e));case 5:case"end":return t.stop()}}),be)}function ge(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.e)(w,he);case 2:case"end":return e.stop()}}),je)}function xe(){var e;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ce.b)(me);case 2:return e=t.sent,t.next=5,Object(ce.d)(I(e));case 5:case"end":return t.stop()}}),_e)}function ve(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.e)(S,xe);case 2:case"end":return e.stop()}}),Oe)}function qe(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:return e.next=4,he();case 4:return e.next=6,Object(ce.a)([Object(ce.c)(ge),Object(ce.c)(ve)]);case 6:case"end":return e.stop()}}),pe)}var we={requests:C.requests,currentRequest:C.currentRequest,addresses:F},ye=Object(de.a)(),Re=Object(ne.a)({reducer:we,middleware:[oe.a,ye],devTools:!1});ye.run(qe);var Se=Re;se.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(x.a,{store:Se,children:Object(f.jsx)(re,{})})}),document.getElementById("root")),ae()}},[[258,1,2]]]);
//# sourceMappingURL=main.0cf315f7.chunk.js.map