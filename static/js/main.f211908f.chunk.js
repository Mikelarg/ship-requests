(this["webpackJsonpship-requests"]=this["webpackJsonpship-requests"]||[]).push([[0],{155:function(e){e.exports=JSON.parse('{"data":[{"id":1,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d","address_from_id":1,"address_to_id":2},{"id":2,"name":"\u041d\u0435 \u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d","address_from_id":1,"address_to_id":3},{"id":3,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 2","address_from_id":1,"address_to_id":9},{"id":4,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d","address_from_id":4,"address_to_id":6},{"id":5,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":2,"address_to_id":7},{"id":6,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":2,"address_to_id":8},{"id":7,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 29","address_from_id":1,"address_to_id":9},{"id":8,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 31","address_from_id":4,"address_to_id":5},{"id":9,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":5,"address_to_id":1},{"id":10,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":4,"address_to_id":2},{"id":11,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 7","address_from_id":3,"address_to_id":2},{"id":12,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 9","address_from_id":9,"address_to_id":2},{"id":13,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 3","address_from_id":3,"address_to_id":7},{"id":14,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 7","address_from_id":7,"address_to_id":9},{"id":15,"name":"\u0412\u0430\u0441\u044f \u041f\u0443\u043f\u043a\u0438\u043d 8","address_from_id":8,"address_to_id":9}]}')},156:function(e){e.exports=JSON.parse('{"data":[{"id":1,"name":"\u0421\u043a\u043b\u0430\u0434 1","lat":55.72191595164918,"lon":37.669966412655874},{"id":2,"name":"\u0421\u043a\u043b\u0430\u0434 2","lat":55.72618037058204,"lon":37.66975183379298},{"id":3,"name":"\u0421\u043a\u043b\u0430\u0434 3","lat":55.725141110910755,"lon":37.654817279119634},{"id":4,"name":"\u0421\u043a\u043b\u0430\u0434 4","lat":55.67220852280308,"lon":37.61119346389933},{"id":5,"name":"\u0421\u043a\u043b\u0430\u0434 5","lat":55.67694859836669,"lon":37.65302378273226},{"id":6,"name":"\u0421\u043a\u043b\u0430\u0434 6","lat":55.63947294954722,"lon":37.67062643080427},{"id":7,"name":"\u0421\u043a\u043b\u0430\u0434 7","lat":55.75629016352462,"lon":37.71537109652677},{"id":8,"name":"\u0421\u043a\u043b\u0430\u0434 8","lat":55.755495684159065,"lon":37.68037390969046},{"id":9,"name":"\u0421\u043a\u043b\u0430\u0434 9","lat":55.75498998992899,"lon":37.66711054205515},{"id":10,"name":"\u0421\u043a\u043b\u0430\u0434 10","lat":55.80276864631171,"lon":37.63826424200409}]}')},163:function(e,t,r){},164:function(e,t,r){},166:function(e,t,r){},254:function(e,t,r){},257:function(e,t,r){},258:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),s=(r(163),r(1)),d=r(264),i=r(145),o=r(270),c=r(4),u=r(9),l=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")},f=(r(164),r(24)),m=["id","dir","isDragging"],b=function(e){var t=e.id,r=void 0===t?"drag-bar":t,n=e.dir,d=e.isDragging,i=Object(u.a)(e,m),o=Object(a.useState)(!1),b=Object(c.a)(o,2),j=b[0],_=b[1];return Object(f.jsx)("div",Object(s.a)({id:r,"data-testid":r,tabIndex:0,className:l("sample-drag-bar","horizontal"===n&&"sample-drag-bar--horizontal",(d||j)&&"sample-drag-bar--dragging"),onFocus:function(){return _(!0)},onTouchStart:function(){return _(!0)},onBlur:function(){return _(!1)},onTouchEnd:function(){return _(!1)}},i))},j=r(30),_=r(65),O=r(266),p=r(267),h=r(269),g=r(265),x=(r(166),r(68)),v=r(45),q=r(2),w="GET_ALL_REQUESTS",y="UPDATE_REQUEST",R="RECEIVE_REQUESTS",S="GET_ALL_REQUESTS",T="RECEIVE_ADDRESSES",E="SET_CURRENT_REQUEST";function k(e){return{type:R,requests:e}}function I(e){return{type:T,addresses:e}}var C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(s.a)({},t.requests.reduce((function(e,t){return e[t.id]=t,e}),{}));case y:return Object(s.a)(Object(s.a)({},e),{},Object(q.a)({},t.requestId,Object(s.a)(Object(s.a)({},e[t.requestId]),{},{address_from_id:t.addressFrom.id,address_from:t.addressFrom,address_to_id:t.addressTo.id,address_to:t.addressTo})));default:return e}},F=C,N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===T?Object(s.a)(Object(s.a)({},e),t.addresses.reduce((function(e,t){return e[t.id]=t,e}),{})):e};Object(v.b)({requests:F,addresses:N});function U(e){for(var t=Object(s.a)({},e.requests),r=0,a=Object.values(t);r<a.length;r++){var n=a[r];n.address_from=e.addresses[n.address_from_id],n.address_to=e.addresses[n.address_to_id]}return t}var L=r(47),D=r.n(L),A=D.a.shape({id:D.a.number.isRequired,name:D.a.string.isRequired,lat:D.a.number.isRequired,lon:D.a.number.isRequired}),P=D.a.shape({id:D.a.number.isRequired,name:D.a.string.isRequired,address_from_id:D.a.number.isRequired,address_from:A.isRequired,address_to_id:D.a.number.isRequired,address_to:A.isRequired}),V=r(93),Q=["form","editing","dataIndex","title","record","index","children","addresses","addressTo","addressFrom","table","forceUpdate","onChange"],z=Object(x.b)((function(e){return{addresses:e.addresses}}))((function(e){var t,r,a=e.form,n=e.editing,d=e.dataIndex,i=(e.title,e.record),o=(e.index,e.children),c=e.addresses,l=e.addressTo,m=void 0===l?"":l,b=e.addressFrom,j=void 0===b?"":b,_=(e.table,e.forceUpdate,e.onChange),p=Object(u.a)(e,Q);if(i)if("address_from"===d){var h=[j.toString(),m?m.toString():i.address_to_id.toString()];r=h[0],t=h[1]}else{var g=[m.toString(),j?j.toString():i.address_from_id.toString()];r=g[0],t=g[1]}var x=Object.keys(c).filter((function(e){return e!==t})).map((function(e,t){return{label:c[e].name,value:e}}));return delete p.dispatch,Object(f.jsx)("td",Object(s.a)(Object(s.a)({},p),{},{children:n?Object(f.jsx)(O.a.Item,{name:d,style:{margin:0},shouldUpdate:function(e,t){return e.address_from!==t.address_from||e.address_to!==t.address_to},children:Object(f.jsx)(V.a,{defaultValue:r,options:x,onChange:function(e){a.setFieldsValue(Object(q.a)({},d,parseInt(e))),_(d,e)}})}):o}))})),B=Object(x.b)((function(e){return{requests:U(e),currentRequest:e.currentRequest,addresses:e.addresses}}),{setCurrentRequest:function(e){return{type:E,request:e}},updateRequest:function(e,t,r){return{type:y,requestId:e,addressFrom:t,addressTo:r}}})((function(e){var t=e.addresses,r=e.updateRequest,n=e.setCurrentRequest,d=e.requests,i=e.currentRequest,o=O.a.useForm(),u=Object(c.a)(o,1)[0],l=Object.values(d),m={selectedRowKeys:[i?i.id:null],onChange:function(e){n(d[e])},type:"radio"},b=Object(a.useState)(""),x=Object(c.a)(b,2),v=x[0],q=x[1],w=Object(a.useState)(""),y=Object(c.a)(w,2),R=y[0],S=y[1],T=Object(a.useState)(""),E=Object(c.a)(T,2),k=E[0],I=E[1],C=function(e){return e.id===v},F=function(){q(""),S(""),I("")},N=function(){var e=Object(_.a)(Object(j.a)().mark((function e(a){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{r(v,t[parseInt(R)],t[parseInt(k)]),q(""),S(""),I("")}catch(a){console.log("Validate Failed:",a)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=[{title:"ID",dataIndex:"id",key:"id",editable:!1},{title:"\u0418\u043c\u044f",dataIndex:"name",key:"name",editable:!1},{title:"\u041e\u0442\u043a\u0443\u0434\u0430",dataIndex:"address_from",key:"address_from",render:function(e){return e.name},editable:!0,className:"address_cell"},{title:"\u041a\u0443\u0434\u0430",dataIndex:"address_to",key:"address_to",render:function(e){return e.name},editable:!0,className:"address_cell"},{title:"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f",key:"action",render:function(e,t){return C(t)?Object(f.jsxs)("span",{children:[Object(f.jsx)(p.a.Link,{onClick:function(){return N(t.key)},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(f.jsx)("br",{}),Object(f.jsx)(h.a,{title:"\u0423\u0432\u0435\u0440\u0435\u043d\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?",onConfirm:F,okText:"\u0414\u0430",cancelText:"\u041d\u0435\u0442",children:Object(f.jsx)("a",{href:"/#",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})})]}):Object(f.jsx)(p.a.Link,{disabled:""!==v,onClick:function(){return function(e){u.setFieldsValue(Object(s.a)(Object(s.a)({},e),{},{address_from:e.address_from_id,address_to:e.address_to_id})),q(e.id),S(e.address_from_id),I(e.address_to_id)}(t)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})}}].map((function(e){return e.editable?Object(s.a)(Object(s.a)({},e),{},{onCell:function(t){return{record:t,dataIndex:e.dataIndex,title:e.title,editing:C(t)}}}):e})),L=function(e,t){"address_from"===e?S(t):I(t)};return Object(f.jsx)(g.a,{columns:U,dataSource:l,pagination:!1,className:"requests-table",rowSelection:m,rowKey:"id",rowClassName:"editable-row",components:{body:{cell:function(e){return Object(f.jsx)(z,Object(s.a)({form:u,addressFrom:R,addressTo:k,onChange:L},e))}}}})})),J=r(263),M=r(268),W=r(52),G=r.n(W),H=(r(251),r(262)),K=r(115),Z=function(e){var t=e.currentRequest,r=Object(H.a)();return Object(a.useEffect)((function(){if(r){var e=[];t&&(e=[G.a.latLng(t.address_from.lat,t.address_from.lon),G.a.latLng(t.address_to.lat,t.address_to.lon)]);var a=G.a.Routing.control({waypoints:e,createMarker:function(e,t,r){var a="";a=0===e?"\u041e\u0442\u043a\u0443\u0434\u0430":"\u041a\u0443\u0434\u0430";var n=G.a.divIcon({className:"my-div-icon",html:'<img class="my-div-image" src="'.concat(K.a,'"/>')+'<span class="marker-span">'.concat(a,"</span>")});return G.a.marker(t.latLng,{icon:n})},lineOptions:{styles:[{color:"#6FA1EC",weight:4}]},show:!1,addWaypoints:!1,routeWhileDragging:!0,draggableWaypoints:!1,fitSelectedRoutes:!0,showAlternatives:!1}).addTo(r);return function(){return r.removeControl(a)}}}),[r,t]),null};Z.propTypes={currentRequest:D.a.oneOfType([P,D.a.instanceOf(null)])};var X=Object(x.b)((function(e){return{currentRequest:e.currentRequest}}))(Z),Y=r(153),$=(r(253),r(254),G.a.icon({iconUrl:K.a,shadowUrl:Y.a}));G.a.Marker.prototype.options.icon=$;var ee=[55.72578142274601,37.6768037893193];function te(){return Object(f.jsxs)(J.a,{center:ee,zoom:13,scrollWheelZoom:!1,className:"flex grow",children:[Object(f.jsx)(M.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",className:"map-tiles"}),Object(f.jsx)(X,{})]})}r(255),r(256),r(257);var re=d.a.Header;var ae=function(){var e=Object(i.a)({axis:"x",initial:540,min:300,max:1e3}),t=e.isDragging,r=e.position,a=e.splitterProps;return Object(f.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(f.jsx)(re,{className:"header",children:Object(f.jsxs)("h1",{children:[Object(f.jsx)(o.a,{className:"icon"}),"\u0417\u0430\u044f\u0432\u043a\u0438"]})}),Object(f.jsx)(d.a,{children:Object(f.jsxs)("div",{className:"site-layout flex grow",children:[Object(f.jsx)("div",{className:"shrink-0 requests",style:{width:r},children:Object(f.jsx)(B,{})}),Object(f.jsx)(b,Object(s.a)({isDragging:t},a)),Object(f.jsx)("div",{className:"flex grow",children:Object(f.jsx)(te,{})})]})})]})},ne=r(40),se=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,271)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,d=t.getTTFB;r(e),a(e),n(e),s(e),d(e)}))},de=r(157),ie=r(159),oe=r(154),ce=r.n(oe),ue=r(60),le=r(155),fe=r(156),me=function(){return new Promise((function(e){setTimeout((function(){return e(le.data)}),200)}))},be=function(){return new Promise((function(e){setTimeout((function(){return e(fe.data)}),200)}))},je=Object(j.a)().mark(ge),_e=Object(j.a)().mark(xe),Oe=Object(j.a)().mark(ve),pe=Object(j.a)().mark(qe),he=Object(j.a)().mark(we);function ge(){var e;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ue.b)(me);case 2:return e=t.sent,t.next=5,Object(ue.d)(k(e));case 5:case"end":return t.stop()}}),je)}function xe(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.e)(w,ge);case 2:case"end":return e.stop()}}),_e)}function ve(){var e;return Object(j.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ue.b)(be);case 2:return e=t.sent,t.next=5,Object(ue.d)(I(e));case 5:case"end":return t.stop()}}),Oe)}function qe(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ue.e)(S,ve);case 2:case"end":return e.stop()}}),pe)}function we(){return Object(j.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve();case 2:return e.next=4,ge();case 4:return e.next=6,Object(ue.a)([Object(ue.c)(xe),Object(ue.c)(qe)]);case 6:case"end":return e.stop()}}),he)}var ye={addresses:N,requests:C,currentRequest:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(s.a)({},t.request);case y:return e&&e.id===t.requestId?Object(s.a)(Object(s.a)({},e),{},{address_from_id:t.addressFrom.id,address_from:t.addressFrom,address_to_id:t.addressTo.id,address_to:t.addressTo}):e;default:return e}}},Re=Object(ie.a)(),Se=Object(de.a)({reducer:ye,middleware:[ce.a,Re],devTools:!1});Re.run(we);var Te=Se;ne.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(x.a,{store:Te,children:Object(f.jsx)(ae,{})})}),document.getElementById("root")),se()}},[[258,1,2]]]);
//# sourceMappingURL=main.f211908f.chunk.js.map