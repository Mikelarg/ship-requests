{"version":3,"sources":["utils/utils.js","components/SampleSplitter.js","actions/index.js","reducers/requests.js","reducers/addresses.js","reducers/index.js","components/propTypes.js","components/EditableAddressCell.js","components/RequestsTable.js","components/RoutineMachine.js","components/Map.js","components/App.js","reportWebVitals.js","api/index.js","sagas/index.js","store.js","index.js"],"names":["cn","args","filter","Boolean","join","SampleSplitter","id","dir","isDragging","props","useState","isFocused","setIsFocused","tabIndex","className","onFocus","onTouchStart","onBlur","onTouchEnd","GET_ALL_REQUESTS","UPDATE_REQUEST","RECEIVE_REQUESTS","GET_ALL_ADDRESSES","RECEIVE_ADDRESSES","SET_CURRENT_REQUEST","receiveRequests","requests","type","receiveAddresses","addresses","state","action","reduce","obj","request","requestId","address_from_id","addressFrom","address_from","address_to_id","addressTo","address_to","address","combineReducers","getRequestsWithAddresses","Object","values","value","Address","PropTypes","shape","number","isRequired","name","string","lat","lon","Request","connect","filterId","currentId","form","editing","dataIndex","record","title","children","index","onChange","table","forceUpdate","restProps","toString","options","keys","el","map","key","label","Item","style","margin","shouldUpdate","prevValues","curValues","defaultValue","setFieldsValue","parseInt","currentRequest","setCurrentRequest","updateRequest","Form","useForm","requestsValues","rowSelection","selectedRowKeys","editingKey","setEditingKey","editingAddressFrom","setEditingAddressFrom","editingAddressTo","setEditingAddressTo","isEditing","cancel","save","errInfo","console","log","mergedColumns","editable","render","item","_","Link","onClick","onConfirm","okText","cancelText","href","disabled","edit","col","onCell","onAddressChange","columns","dataSource","pagination","rowKey","rowClassName","components","body","cell","createRoutineMachineLayer","useMap","useEffect","wayPoints","L","latLng","instance","Routing","control","waypoints","createMarker","i","wp","nWps","text","myIcon","divIcon","html","icon","marker","lineOptions","styles","color","weight","show","addWaypoints","routeWhileDragging","draggableWaypoints","fitSelectedRoutes","showAlternatives","addTo","removeControl","propTypes","oneOfType","instanceOf","RoutineMachine","DefaultIcon","iconUrl","shadowUrl","iconShadow","Marker","prototype","position","Map","MapContainer","center","zoom","scrollWheelZoom","TileLayer","attribution","url","Header","Layout","App","useResizable","axis","initial","min","max","isFileDragging","fileW","fileDragBarProps","splitterProps","minHeight","DatabaseOutlined","width","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","api","Promise","resolve","setTimeout","_request","data","_addresses","getAllRequests","watchGetProducts","getAllAddresses","watchGetAddresses","root","call","put","actions","takeEvery","all","fork","reducer","addressesReducer","sagaMiddleware","createSagaMiddleware","store","configureStore","middleware","logger","devTools","process","run","rootSaga","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f211908f.chunk.js","sourcesContent":["export const cn = (...args) => args.filter(Boolean).join(\" \");\nexport const isEmpty = (obj) => Object.keys(obj).length === 0;\n","import React, {useState} from 'react'\nimport {cn} from \"../utils/utils\";\n\nimport '../styles/SampleSplitter.css';\n\nconst SampleSplitter = ({\n                            id = 'drag-bar',\n                            dir,\n                            isDragging,\n                            ...props\n                        }) => {\n    const [isFocused, setIsFocused] = useState(false);\n\n    return (\n        <div\n            id={id}\n            data-testid={id}\n            tabIndex={0}\n            className={cn(\n                'sample-drag-bar',\n                dir === 'horizontal' && 'sample-drag-bar--horizontal',\n                (isDragging || isFocused) && 'sample-drag-bar--dragging'\n            )}\n            onFocus={() => setIsFocused(true)}\n            onTouchStart={() => setIsFocused(true)}\n            onBlur={() => setIsFocused(false)}\n            onTouchEnd={() => setIsFocused(false)}\n            {...props}\n        />\n    )\n};\n\nexport default SampleSplitter\n","export const GET_ALL_REQUESTS = 'GET_ALL_REQUESTS';\nexport const UPDATE_REQUEST = 'UPDATE_REQUEST';\nexport const RECEIVE_REQUESTS = 'RECEIVE_REQUESTS';\n\nexport const GET_ALL_ADDRESSES = 'GET_ALL_REQUESTS';\nexport const RECEIVE_ADDRESSES = 'RECEIVE_ADDRESSES';\n\nexport const SET_CURRENT_REQUEST = 'SET_CURRENT_REQUEST';\n\nexport function getAllRequests() {\n    return {\n        type: GET_ALL_REQUESTS,\n    }\n}\n\nexport function receiveRequests(requests) {\n    return {\n        type: RECEIVE_REQUESTS,\n        requests,\n    }\n}\n\nexport function updateRequest(requestId, addressFrom, addressTo) {\n    return {\n        type: UPDATE_REQUEST,\n        requestId,\n        addressFrom,\n        addressTo\n    }\n}\n\n\nexport function getAllAddresses() {\n    return {\n        type: GET_ALL_ADDRESSES,\n    }\n}\n\nexport function receiveAddresses(addresses) {\n    return {\n        type: RECEIVE_ADDRESSES,\n        addresses,\n    }\n}\n\nexport function setCurrentRequest(request) {\n    return {\n        type: SET_CURRENT_REQUEST,\n        request,\n    }\n}\n","import {RECEIVE_REQUESTS, UPDATE_REQUEST, SET_CURRENT_REQUEST} from '../actions'\n\nconst requests = (state = {}, action) => {\n    switch (action.type) {\n        case RECEIVE_REQUESTS:\n            return {\n                ...action.requests.reduce((obj, request) => {\n                    obj[request.id] = request;\n                    return obj\n                }, {}),\n            };\n        case UPDATE_REQUEST:\n            return {\n                ...state,\n                [action.requestId]: {\n                    ...state[action.requestId],\n                    address_from_id: action.addressFrom.id,\n                    address_from: action.addressFrom,\n                    address_to_id: action.addressTo.id,\n                    address_to: action.addressTo,\n                }\n            };\n        default:\n            return state;\n    }\n};\n\nconst currentRequest = (state = null, action) => {\n    switch (action.type) {\n        case SET_CURRENT_REQUEST:\n            return {...action.request};\n        case UPDATE_REQUEST:\n            if (state && state.id === action.requestId) {\n                return {\n                    ...state,\n                    address_from_id: action.addressFrom.id,\n                    address_from: action.addressFrom,\n                    address_to_id: action.addressTo.id,\n                    address_to: action.addressTo,\n                };\n            }\n            return state;\n        default:\n            return state;\n    }\n};\n\nexport {currentRequest, requests};\nexport default requests;\n","import { RECEIVE_ADDRESSES } from '../actions'\n\nconst addresses = (state = {}, action) => {\n    switch (action.type) {\n        case RECEIVE_ADDRESSES:\n            return {\n                ...state,\n                ...action.addresses.reduce((obj, address) => {\n                    obj[address.id] = address;\n                    return obj\n                }, {}),\n            };\n        default:\n            return state;\n    }\n};\n\nexport default addresses;\n","import { combineReducers } from 'redux';\nimport requests from \"./requests\";\nimport addresses from \"./addresses\";\n\nconst mainReducer = combineReducers({\n    requests,\n    addresses,\n});\n\nexport function getRequestsWithAddresses(state) {\n    const requests = {...state.requests};\n    for (const value of Object.values(requests)) {\n        value.address_from = state.addresses[value.address_from_id];\n        value.address_to = state.addresses[value.address_to_id];\n    }\n    return requests;\n}\n\nexport default function root(state, action) {\n    return mainReducer(state, action)\n}\n","import PropTypes from \"prop-types\";\n\nexport const Address = PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    lat: PropTypes.number.isRequired,\n    lon: PropTypes.number.isRequired\n});\n\nexport const Request = PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    address_from_id: PropTypes.number.isRequired,\n    address_from: Address.isRequired,\n    address_to_id: PropTypes.number.isRequired,\n    address_to: Address.isRequired,\n});","import {Form, Select} from 'antd';\nimport React from 'react';\nimport {connect} from \"react-redux\";\n\nconst EditableAddressCell = ({\n                                 form, editing, dataIndex, title,\n                                 record, index, children, addresses,\n                                 addressTo = '', addressFrom = '', table, forceUpdate, onChange,\n                                 ...restProps\n                             }) => {\n    let filterId;\n    let currentId;\n    if (record) {\n        if (dataIndex === 'address_from') {\n            [currentId, filterId] = [addressFrom.toString(), addressTo ? addressTo.toString() : record.address_to_id.toString()]\n        } else {\n            [currentId, filterId] = [addressTo.toString(), addressFrom ? addressFrom.toString() : record.address_from_id.toString()];\n        }\n    }\n    const options = Object.keys(addresses).filter(el => el !== filterId).map((key, index) => ({\n        label: addresses[key].name,\n        value: key\n    }));\n    const handleChange = (value) => {\n        form.setFieldsValue({[dataIndex]: parseInt(value)});\n        onChange(dataIndex, value)\n    };\n    delete restProps['dispatch'];\n\n    return (\n        <td {...restProps}>\n            {editing ? (\n                <Form.Item\n                    name={dataIndex}\n                    style={{\n                        margin: 0,\n                    }}\n                    shouldUpdate={(prevValues, curValues) => {\n                        return prevValues.address_from !== curValues.address_from || prevValues.address_to !== curValues.address_to\n                    }}\n                >\n                    <Select defaultValue={currentId}\n                            options={options} onChange={handleChange}>\n                    </Select>\n                </Form.Item>\n            ) : (\n                children\n            )}\n        </td>\n    );\n};\n\nexport default connect(state => ({addresses: state.addresses}))(EditableAddressCell);","import {Table, Form, Popconfirm, Typography} from \"antd\";\nimport React, {useState} from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport '../styles/RequestsTable.css'\nimport {connect} from \"react-redux\";\nimport {getRequestsWithAddresses} from \"../reducers\";\nimport {setCurrentRequest, updateRequest} from \"../actions\";\nimport {Request} from \"./propTypes\";\nimport EditableAddressCell from \"./EditableAddressCell\";\n\nconst RequestsTable = (props) => {\n    const {addresses, updateRequest, setCurrentRequest, requests, currentRequest} = props;\n\n    const [form] = Form.useForm();\n\n    const requestsValues = Object.values(requests);\n    const selectedRowKeys = [currentRequest ? currentRequest.id : null];\n    const rowSelection = {\n        selectedRowKeys,\n        onChange: (key) => {\n            setCurrentRequest(requests[key])\n        },\n        type: 'radio'\n    };\n\n    const [editingKey, setEditingKey] = useState('');\n    // Принял решение хранить значения редактирования не в форме, так как обновление полей очень долго шло и портило\n    // юзер экспириенс\n    const [editingAddressFrom, setEditingAddressFrom] = useState('');\n    const [editingAddressTo, setEditingAddressTo] = useState('');\n\n    const isEditing = (record) => record.id === editingKey;\n\n    const edit = (record) => {\n        form.setFieldsValue({\n            ...record,\n            address_from: record.address_from_id,\n            address_to: record.address_to_id,\n        });\n        setEditingKey(record.id);\n        setEditingAddressFrom(record.address_from_id);\n        setEditingAddressTo(record.address_to_id);\n    };\n\n    const cancel = () => {\n        setEditingKey('');\n        setEditingAddressFrom('');\n        setEditingAddressTo('');\n    };\n\n    const save = async (key) => {\n        try {\n            updateRequest(editingKey, addresses[parseInt(editingAddressFrom)], addresses[parseInt(editingAddressTo)]);\n            setEditingKey('');\n            setEditingAddressFrom('');\n            setEditingAddressTo('');\n        } catch (errInfo) {\n            console.log('Validate Failed:', errInfo);\n        }\n    };\n\n    const columns = [\n        {\n            title: 'ID',\n            dataIndex: 'id',\n            key: 'id',\n            editable: false,\n        },\n        {\n            title: 'Имя',\n            dataIndex: 'name',\n            key: 'name',\n            editable: false,\n        },\n        {\n            title: 'Откуда',\n            dataIndex: 'address_from',\n            key: 'address_from',\n            render: item => item.name,\n            editable: true,\n            className: 'address_cell'\n        },\n        {\n            title: 'Куда',\n            dataIndex: 'address_to',\n            key: 'address_to',\n            render: item => item.name,\n            editable: true,\n            className: 'address_cell'\n        },\n        {\n            title: 'Действия',\n            key: 'action',\n            render: (_, record) => {\n                const editable = isEditing(record);\n                return editable ? (\n                    <span>\n                        <Typography.Link\n                            onClick={() => save(record.key)}\n                        >\n                          Сохранить\n                        </Typography.Link>\n                        <br/>\n                        <Popconfirm title=\"Уверенны, что хотите отменить изменения?\" onConfirm={cancel}\n                                    okText=\"Да\" cancelText=\"Нет\">\n                          <a href=\"/#\">Отменить</a>\n                        </Popconfirm>\n                    </span>\n                ) : (\n                    <Typography.Link disabled={editingKey !== ''} onClick={() => edit(record)}>\n                        Изменить\n                    </Typography.Link>\n                );\n            },\n        },\n    ];\n\n    const mergedColumns = columns.map((col) => {\n        if (!col.editable) {\n            return col;\n        }\n\n        return {\n            ...col,\n            onCell: (record) => ({\n                record,\n                dataIndex: col.dataIndex,\n                title: col.title,\n                editing: isEditing(record),\n            }),\n        };\n    });\n\n    const onAddressChange = (dataIndex, value) => {\n        if (dataIndex === 'address_from') {\n            setEditingAddressFrom(value);\n        } else {\n            setEditingAddressTo(value);\n        }\n    };\n\n    return (\n        <Table\n            columns={mergedColumns} dataSource={requestsValues}\n            pagination={false} className='requests-table'\n            rowSelection={rowSelection} rowKey=\"id\"\n            rowClassName=\"editable-row\"\n            components={{\n                body: {\n                    cell: (props) => <EditableAddressCell form={form} addressFrom={editingAddressFrom}\n                                                          addressTo={editingAddressTo}\n                                                          onChange={onAddressChange} {...props}/>,\n                },\n            }}\n        />\n    )\n};\n\nRequestsTable.propTypes = {\n    requests: PropTypes.objectOf(Request),\n    currentRequest: Request\n};\n\nexport default connect(state => ({\n    requests: getRequestsWithAddresses(state),\n    currentRequest: state.currentRequest,\n    addresses: state.addresses\n}), {setCurrentRequest, updateRequest})(RequestsTable)","import L from \"leaflet\";\nimport \"leaflet-routing-machine\";\nimport {useMap} from \"react-leaflet\";\nimport {useEffect} from \"react\";\nimport {connect} from \"react-redux\";\nimport PropTypes from \"prop-types\";\n\nimport {Request} from \"./propTypes\";\n\nimport icon from 'leaflet/dist/images/marker-icon.png';\n\nconst createRoutineMachineLayer = (props) => {\n    const {currentRequest} = props;\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    const map = useMap();\n\n\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    useEffect(() => {\n        if (!map) return;\n        let wayPoints = [];\n        if (currentRequest) {\n            wayPoints = [\n                L.latLng(currentRequest.address_from.lat, currentRequest.address_from.lon),\n                L.latLng(currentRequest.address_to.lat, currentRequest.address_to.lon)\n            ]\n        }\n        const instance = L.Routing.control({\n            waypoints: wayPoints,\n            createMarker: function (i, wp, nWps) {\n                // here change all the others\n                let text = '';\n                if (i === 0) {\n                    text = 'Откуда'\n                } else {\n                    text = 'Куда'\n                }\n                let myIcon = L.divIcon({\n                    className: 'my-div-icon',\n                    html: `<img class=\"my-div-image\" src=\"${icon}\"/>` +\n                        `<span class=\"marker-span\">${text}</span>`\n                });\n                return L.marker(wp.latLng, {\n                    icon: myIcon\n                });\n            },\n            lineOptions: {\n                styles: [{color: \"#6FA1EC\", weight: 4}]\n            },\n            show: false,\n            addWaypoints: false,\n            routeWhileDragging: true,\n            draggableWaypoints: false,\n            fitSelectedRoutes: true,\n            showAlternatives: false\n        }).addTo(map);\n\n        return () => map.removeControl(instance);\n    }, [map, currentRequest]);\n    return null;\n};\n\ncreateRoutineMachineLayer.propTypes = {\n    currentRequest: PropTypes.oneOfType([Request, PropTypes.instanceOf(null)])\n};\n\nconst RoutineMachine = connect(state => ({\n    currentRequest: state.currentRequest\n}))(createRoutineMachineLayer);\n\nexport default RoutineMachine;\n","import React from 'react';\nimport { MapContainer, TileLayer} from 'react-leaflet'\nimport L from 'leaflet';\nimport RoutineMachine from \"./RoutineMachine\";\n\nimport icon from 'leaflet/dist/images/marker-icon.png';\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\n\nimport \"leaflet/dist/leaflet.css\";\nimport '../styles/Map.css'\n\nlet DefaultIcon = L.icon({\n    iconUrl: icon,\n    shadowUrl: iconShadow\n});\n\nL.Marker.prototype.options.icon = DefaultIcon;\n\nconst position = [55.72578142274601, 37.6768037893193];\n\nexport default function Map() {\n    return (\n        <MapContainer center={position} zoom={13} scrollWheelZoom={false} className={\"flex grow\"}>\n            <TileLayer\n                attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n                url=\"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\"\n                className='map-tiles'\n            />\n            <RoutineMachine />\n        </MapContainer>\n    );\n};","import React from 'react';\nimport {Layout} from 'antd';\nimport {useResizable} from 'react-resizable-layout';\nimport {DatabaseOutlined} from \"@ant-design/icons\";\nimport SampleSplitter from \"./SampleSplitter\";\nimport RequestsTable from \"./RequestsTable\";\nimport Map from \"./Map\";\n\nimport \"antd/dist/antd.css\";\nimport \"antd/dist/antd.dark.css\";\nimport '../styles/App.css';\n\nconst {Header} = Layout;\n\n\nfunction App() {\n    const {\n        isDragging: isFileDragging,\n        position: fileW,\n        splitterProps: fileDragBarProps\n    } = useResizable({\n        axis: \"x\",\n        initial: 540,\n        min: 300,\n        max: 1000\n    });\n    return (\n        <Layout\n            style={{\n                minHeight: '100vh',\n            }}\n        >\n            <Header className=\"header\">\n                <h1><DatabaseOutlined className=\"icon\" />Заявки</h1>\n            </Header>\n            <Layout>\n                <div className=\"site-layout flex grow\">\n                    <div className={\"shrink-0 requests\"} style={{width: fileW}}>\n                        <RequestsTable/>\n                    </div>\n                    <SampleSplitter isDragging={isFileDragging} {...fileDragBarProps} />\n                    <div className={\"flex grow\"}>\n                        <Map/>\n                    </div>\n                </div>\n            </Layout>\n        </Layout>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import _request from './requests'\nimport _addresses from './addresses'\n\nconst TIMEOUT = 200;\n\nexport const api = {\n    getRequests() {\n        return new Promise(resolve => {\n            setTimeout(() => resolve(_request.data), TIMEOUT)\n        })\n    },\n    getAddresses() {\n        return new Promise(resolve => {\n            setTimeout(() => resolve(_addresses.data), TIMEOUT)\n        })\n    },\n}","import { put, call, fork, takeEvery, all } from 'redux-saga/effects'\nimport * as actions from '../actions'\nimport { api } from '../api'\n\nexport function* getAllRequests() {\n    const requests = yield call(api.getRequests);\n    yield put(actions.receiveRequests(requests))\n}\n\nexport function* watchGetProducts() {\n    yield takeEvery(actions.GET_ALL_REQUESTS, getAllRequests)\n}\n\nexport function* getAllAddresses() {\n    const addresses = yield call(api.getAddresses);\n    yield put(actions.receiveAddresses(addresses))\n}\n\nexport function* watchGetAddresses() {\n    yield takeEvery(actions.GET_ALL_ADDRESSES, getAllAddresses)\n}\n\nexport default function* root() {\n    yield getAllAddresses();\n    yield getAllRequests();\n    yield all([fork(watchGetProducts), fork(watchGetAddresses)])\n}\n","import {configureStore} from '@reduxjs/toolkit'\nimport createSagaMiddleware from 'redux-saga'\n\nimport logger from 'redux-logger'\nimport rootSaga from './sagas'\nimport {requests, currentRequest} from \"./reducers/requests\";\nimport addressesReducer from \"./reducers/addresses\";\n\nconst reducer = {\n    addresses: addressesReducer,\n    requests,\n    currentRequest\n};\n\nconst sagaMiddleware = createSagaMiddleware();\n\nconst store = configureStore({\n    reducer,\n    middleware: [logger, sagaMiddleware],\n    devTools: process.env.NODE_ENV !== 'production',\n});\n\nsagaMiddleware.run(rootSaga);\n\nexport default store;","import React from 'react';\nimport './index.css';\nimport App from './components/App';\nimport * as ReactDOM from 'react-dom';\nimport reportWebVitals from './reportWebVitals';\nimport {Provider} from \"react-redux\";\nimport store from \"./store\";\n\nReactDOM.render(<React.StrictMode>\n        <Provider store={store}>\n            <App/>\n        </Provider>\n    </React.StrictMode>,\n    document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}